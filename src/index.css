@import "./styles/tokens.css";

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html,
body {
  height: 100%;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}

body {
  font-family: Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: var(--bg-base);
  color: var(--text-primary);
  position: relative;
}

#root {
  min-height: 100vh;
  width: 100%;
  position: relative;
}

/* Скрытие скроллбара для всех скроллируемых элементов */
* {
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE и Edge */
}

*::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}

/* Ant Design global overrides — Expend palette + Apple radius */
:global(.ant-btn-primary) {
  background: var(--accent) !important;
  border-color: var(--accent) !important;
}
:global(.ant-btn-primary:hover) {
  background: var(--accent-hover) !important;
  border-color: var(--accent-hover) !important;
}
:global(.ant-input-affix-wrapper),
:global(.ant-input),
:global(.ant-select-selector),
:global(.ant-picker) {
  border-radius: var(--radius-md) !important;
}
:global(.ant-card) {
  border-radius: var(--radius-lg) !important;
}
:global(.ant-tag) {
  border-radius: var(--radius-sm) !important;
}
:global(.ant-modal-content) {
  border-radius: var(--radius-2xl) !important;
}
:global(.ant-float-btn-circle) {
  border-radius: var(--radius-xl) !important;
}

/* Кнопки — единые высота и ширина где применимо */
:global(.ant-btn) {
  min-height: var(--btn-height) !important;
  height: auto !important;
  padding: 6px 16px !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
}
:global(.ant-btn-lg) {
  min-height: var(--btn-height-lg) !important;
  padding: 8px 20px !important;
}
:global(.ant-btn-icon-only) {
  width: var(--btn-icon-size) !important;
  min-width: var(--btn-icon-size) !important;
  height: var(--btn-icon-size) !important;
  min-height: var(--btn-icon-size) !important;
  padding: 0 !important;
}
/* Круглые кнопки «как плюсики» (Редактировать, Добавить цель) */
:global(.ant-btn.circle-icon-btn) {
  border-radius: 50% !important;
  width: var(--btn-icon-size) !important;
  min-width: var(--btn-icon-size) !important;
  height: var(--btn-icon-size) !important;
  min-height: var(--btn-icon-size) !important;
  padding: 0 !important;
}
:global(.ant-btn-sm) {
  min-height: 32px !important;
  padding: 2px 8px !important;
}

/* Пары кнопок в футерах — одинаковая ширина */
:global(.ant-modal-footer) {
  display: flex !important;
  gap: 8px !important;
}
:global(.ant-modal-footer .ant-btn) {
  flex: 1 !important;
  min-width: 0 !important;
}
:global(.ant-drawer-footer) {
  display: flex !important;
  gap: 8px !important;
}
:global(.ant-drawer-footer .ant-btn) {
  flex: 1 !important;
  min-width: 0 !important;
}

/* Общие стили для всех drawers */
:global(.ant-drawer-content-wrapper) {
  box-shadow: none !important;
  z-index: 1002 !important; /* Выше Header (1001) */
}

:global(.ant-drawer-mask) {
  z-index: 1001 !important; /* Выше Header (1001), но ниже drawer content */
}

/* Стили для drawers на десктопе — четверть экрана */
@media (min-width: 769px) {
  :global(.ant-drawer-content-wrapper) {
    width: 25vw !important;
    max-width: 400px !important;
  }
}

/* Исправление для drawers снизу на мобильных устройствах — на весь экран, Apple-style radius */
@media (max-width: 768px) {
  :global(.ant-drawer-content-wrapper) {
    width: 100% !important;
    max-width: 100% !important;
    left: 0 !important;
    right: 0 !important;
    height: 100vh !important;
    height: 100dvh !important;
    max-height: 100vh !important;
    max-height: 100dvh !important;
    top: auto !important;
    bottom: 0 !important;
  }

  :global(.ant-drawer-content) {
    width: 100% !important;
    max-width: 100% !important;
    height: 100vh !important;
    height: 100dvh !important;
    max-height: 100vh !important;
    max-height: 100dvh !important;
    overflow: hidden !important;
    border-radius: var(--radius-sheet) var(--radius-sheet) 0 0 !important;
  }

  :global(.ant-drawer-body) {
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
    max-height: calc(100vh - 55px) !important;
    max-height: calc(100dvh - 55px) !important;
    padding-bottom: max(20px, env(safe-area-inset-bottom)) !important;
  }

  :global(.ant-drawer-header) {
    position: sticky !important;
    top: 0 !important;
    z-index: 1 !important;
    background: var(--bg-card) !important;
    border-radius: var(--radius-sheet) var(--radius-sheet) 0 0 !important;
  }
}
