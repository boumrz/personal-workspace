@import "./styles/tokens.css";

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html,
body {
  height: 100%;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}

body {
  font-family: Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: var(--bg-base);
  color: var(--text-primary);
  position: relative;
}

#root {
  min-height: 100vh;
  width: 100%;
  position: relative;
}

/* Скрытие скроллбара для всех скроллируемых элементов */
* {
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE и Edge */
}

*::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}

/* Ant Design global overrides — приглушённая палитра */
.ant-btn-primary {
  background: #4a9ed6 !important;
  border-color: #4a9ed6 !important;
}
.ant-btn-primary:hover,
.ant-btn-primary:focus {
  background: #6ab0de !important;
  border-color: #6ab0de !important;
}

/* Приглушённые цвета для инпутов и других элементов */
.ant-input:focus,
.ant-input:hover,
.ant-input-focused,
.ant-input-affix-wrapper:focus,
.ant-input-affix-wrapper:hover,
.ant-input-affix-wrapper-focused,
.ant-input-affix-wrapper:focus-within {
  border-color: #4a9ed6 !important;
}
.ant-input-number:focus,
.ant-input-number:hover,
.ant-input-number-focused,
.ant-input-number:focus-within {
  border-color: #4a9ed6 !important;
}
.ant-input-number-focused,
.ant-input-number:focus-within {
  box-shadow: 0 0 0 2px rgba(74, 158, 214, 0.2) !important;
}
.ant-select:not(.ant-select-disabled):hover .ant-select-selector,
.ant-select-focused .ant-select-selector {
  border-color: #4a9ed6 !important;
}
.ant-picker:hover,
.ant-picker-focused {
  border-color: #4a9ed6 !important;
}
.ant-progress-bg {
  background-color: #4a9ed6 !important;
}
.ant-float-btn-primary .ant-float-btn-body {
  background: #4a9ed6 !important;
}
.ant-float-btn-primary:hover .ant-float-btn-body {
  background: #6ab0de !important;
}

/* Border radius */
.ant-input-affix-wrapper,
.ant-input,
.ant-select-selector,
.ant-picker {
  border-radius: var(--radius-md) !important;
}
.ant-card {
  border-radius: var(--radius-lg) !important;
}
.ant-tag {
  border-radius: var(--radius-sm) !important;
}
.ant-modal-content {
  border-radius: var(--radius-2xl) !important;
}
.ant-float-btn-circle {
  border-radius: var(--radius-xl) !important;
}

/* Кнопки — единые высота и ширина где применимо */
.ant-btn {
  min-height: var(--btn-height) !important;
  height: auto !important;
  padding: 6px 16px !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
}
.ant-btn-lg {
  min-height: var(--btn-height-lg) !important;
  padding: 8px 20px !important;
}
.ant-btn-icon-only {
  width: var(--btn-icon-size) !important;
  min-width: var(--btn-icon-size) !important;
  height: var(--btn-icon-size) !important;
  min-height: var(--btn-icon-size) !important;
  padding: 0 !important;
}
/* Круглые кнопки «как плюсики» (Редактировать, Добавить цель) */
.ant-btn.circle-icon-btn {
  border-radius: 50% !important;
  width: var(--btn-icon-size) !important;
  min-width: var(--btn-icon-size) !important;
  height: var(--btn-icon-size) !important;
  min-height: var(--btn-icon-size) !important;
  padding: 0 !important;
}
.ant-btn-sm {
  min-height: 32px !important;
  padding: 2px 8px !important;
}

/* Пары кнопок в футерах — одинаковая ширина */
.ant-modal-footer {
  display: flex !important;
  gap: 8px !important;
}
.ant-modal-footer .ant-btn {
  flex: 1 !important;
  min-width: 0 !important;
}
.ant-drawer-footer {
  display: flex !important;
  gap: 8px !important;
}
.ant-drawer-footer .ant-btn {
  flex: 1 !important;
  min-width: 0 !important;
}

/* Общие стили для всех drawers */
.ant-drawer-content-wrapper {
  box-shadow: none !important;
  z-index: 1002 !important; /* Выше Header (1001) */
}

.ant-drawer-mask {
  z-index: 1001 !important; /* Выше Header (1001), но ниже drawer content */
}

/* Стили для drawers на десктопе — четверть экрана */
@media (min-width: 769px) {
  .ant-drawer-content-wrapper {
    width: 25vw !important;
    max-width: 400px !important;
  }
}

/* Исправление для drawers снизу на мобильных устройствах — на весь экран, Apple-style radius */
@media (max-width: 768px) {
  .ant-drawer-content-wrapper {
    width: 100% !important;
    max-width: 100% !important;
    left: 0 !important;
    right: 0 !important;
    height: 100vh !important;
    height: 100dvh !important;
    max-height: 100vh !important;
    max-height: 100dvh !important;
    top: auto !important;
    bottom: 0 !important;
  }

  .ant-drawer-content {
    width: 100% !important;
    max-width: 100% !important;
    height: 100vh !important;
    height: 100dvh !important;
    max-height: 100vh !important;
    max-height: 100dvh !important;
    overflow: hidden !important;
    border-radius: var(--radius-sheet) var(--radius-sheet) 0 0 !important;
  }

  .ant-drawer-body {
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
    max-height: calc(100vh - 55px) !important;
    max-height: calc(100dvh - 55px) !important;
    padding-bottom: max(20px, env(safe-area-inset-bottom)) !important;
  }

  .ant-drawer-header {
    position: sticky !important;
    top: 0 !important;
    z-index: 1 !important;
    background: var(--bg-card) !important;
    border-radius: var(--radius-sheet) var(--radius-sheet) 0 0 !important;
  }
}
